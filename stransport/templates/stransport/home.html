{% extends "stransport/layout.html" %}
{% block title %}注专转 住注转{% endblock %}

{% block content %}
<h1 class="page-title">注专转 住注转</h1>
<a href="/trivia/" class="button" style="display:inline-block;margin:12px 0;">
   专   转
</a>


{% if current_user.profile.role == "sick" %}
<div class="panel" id="sick-panel">
  <form id="create-request-form">
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
    <input type="text" name="pickup" placeholder="转转 住祝" required>
    <input type="text" name="destination" placeholder="注" required>
    <input type="datetime-local" name="time" required>
    <input type="text" name="notes" placeholder="注专转">
    <input type="text" name="phone" placeholder="住驻专 驻" required>
    <button type="submit" class="new-request-btn">爪专 拽砖</button>
  </form>

  <div style="margin-top:12px;">
    <button id="show-closed-btn" class="button">专转 拽砖转 转/住专转</button>
    <button id="show-open-btn" class="button" style="display:none;">专 拽砖转 驻转转</button>
  </div>

  <div id="requests-container" style="margin-top:14px;"></div>
  <div id="closed-requests-container" style="margin-top:14px; display:none;"></div>
</div>

{% endif %}

{% if current_user.profile.role == "volunteer" %}
<div class="panel" id="volunteer-panel">
  <div style="margin-bottom:12px;">
    <button id="show-accepted-btn" class="button">专转 拽砖转 砖专转 砖</button>
    <button id="show-open-btn" class="button" style="display:none;">专 拽砖转 驻转转</button>
  </div>
  <div id="requests-container"></div>
  <div id="accepted-requests-container" style="display:none;"></div>
</div>
{% endif %}
{% endblock %}

{% load static %}
<script src="{% static 'stransport/stransport.js' %}" defer></script>
<script>
window.currentUserRole = "{{ current_user.profile.role|default:'' }}";
window.currentUserId = "{{ current_user.id|default:'' }}";
window.currentUserUsername = "{{ current_user.username|escapejs }}";
</script>
